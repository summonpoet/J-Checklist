(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,9843,e=>{"use strict";var t=e.i(43476),s=e.i(71645);let n=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim(),r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)};var a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,s.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:l,className:o="",children:i,iconNode:c,...d},m)=>(0,s.createElement)("svg",{ref:m,...a,width:t,height:t,stroke:e,strokeWidth:l?24*Number(r)/Number(t):r,className:n("lucide",o),...!i&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1})(d)&&{"aria-hidden":"true"},...d},[...c.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(i)?i:[i]])),o=(e,t)=>{let a=(0,s.forwardRef)(({className:a,...o},i)=>(0,s.createElement)(l,{ref:i,iconNode:t,className:n(`lucide-${r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,a),...o}));return a.displayName=r(e),a},i=o("list-todo",[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]]),c=o("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),d=o("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);function m(){return new Date().toISOString().split("T")[0]}function x(e){return{actionId:e,completedCount:0,currentExecution:null,isCompletedToday:!1,executions:[],lastUpdated:Date.now()}}let u=o("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),h=o("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),p=o("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),b=o("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),f=o("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),g={low:{label:"低",color:"bg-green-100 text-green-700 border-green-200"},medium:{label:"中",color:"bg-yellow-100 text-yellow-700 border-yellow-200"},high:{label:"高",color:"bg-red-100 text-red-700 border-red-200"}},y={low:{label:"低",color:"bg-gray-100 text-gray-600 border-gray-200"},medium:{label:"中",color:"bg-blue-100 text-blue-700 border-blue-200"},high:{label:"高",color:"bg-purple-100 text-purple-700 border-purple-200"}};function j({actionItems:e,onAdd:n,onUpdate:r,onDelete:a}){let[l,o]=(0,s.useState)(!1),[i,d]=(0,s.useState)(null),[m,x]=(0,s.useState)(""),[j,N]=(0,s.useState)("medium"),[w,v]=(0,s.useState)("medium"),[k,C]=(0,s.useState)(1),[T,I]=(0,s.useState)(!1),M=()=>{x(""),N("medium"),v("medium"),C(1),I(!1)},D=l||null!==i;return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c,{className:"w-5 h-5 text-stone-600"}),(0,t.jsx)("h2",{className:"text-lg font-semibold text-stone-800",children:"管理行动项"})]}),(0,t.jsxs)("span",{className:"text-sm text-stone-500",children:[e.length," 个行动项"]})]}),!D&&(0,t.jsxs)("button",{onClick:()=>o(!0),className:"w-full py-3 px-4 border-2 border-dashed border-stone-300 rounded-xl text-stone-500 hover:border-stone-400 hover:text-stone-600 hover:bg-stone-50 transition-colors flex items-center justify-center gap-2",children:[(0,t.jsx)(u,{className:"w-5 h-5"}),"添加行动项"]}),D&&(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-stone-200 p-4 space-y-4 shadow-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-stone-700 mb-1.5",children:"行动项名称"}),(0,t.jsx)("input",{type:"text",value:m,onChange:e=>x(e.target.value),placeholder:"例如：阅读30分钟",className:"w-full px-3 py-2 border border-stone-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-stone-500 focus:border-transparent",autoFocus:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-stone-700 mb-1.5",children:"难度"}),(0,t.jsx)("div",{className:"flex gap-2",children:["low","medium","high"].map(e=>(0,t.jsx)("button",{onClick:()=>N(e),className:`flex-1 py-2 px-1 rounded-lg border text-sm font-medium transition-colors ${j===e?g[e].color+" ring-2 ring-offset-1":"bg-stone-50 text-stone-600 border-stone-200 hover:bg-stone-100"}`,children:g[e].label},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-stone-700 mb-1.5",children:"重要度"}),(0,t.jsx)("div",{className:"flex gap-2",children:["low","medium","high"].map(e=>(0,t.jsx)("button",{onClick:()=>v(e),className:`flex-1 py-2 px-1 rounded-lg border text-sm font-medium transition-colors ${w===e?y[e].color+" ring-2 ring-offset-1":"bg-stone-50 text-stone-600 border-stone-200 hover:bg-stone-100"}`,children:y[e].label},e))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-stone-700 mb-1.5",children:"一日几次"}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("button",{onClick:()=>C(Math.max(1,k-1)),className:"w-10 h-10 rounded-lg border border-stone-300 flex items-center justify-center hover:bg-stone-100 transition-colors",children:"-"}),(0,t.jsx)("span",{className:"w-16 text-center text-lg font-semibold text-stone-800",children:k}),(0,t.jsx)("button",{onClick:()=>C(k+1),className:"w-10 h-10 rounded-lg border border-stone-300 flex items-center justify-center hover:bg-stone-100 transition-colors",children:"+"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-stone-700 mb-1.5",children:"有始有终？"}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:()=>I(!1),className:`flex-1 py-2.5 px-4 rounded-lg border text-sm font-medium transition-colors ${!T?"bg-stone-800 text-white border-stone-800":"bg-stone-50 text-stone-600 border-stone-200 hover:bg-stone-100"}`,children:"否，只记录完成"}),(0,t.jsx)("button",{onClick:()=>I(!0),className:`flex-1 py-2.5 px-4 rounded-lg border text-sm font-medium transition-colors ${T?"bg-stone-800 text-white border-stone-800":"bg-stone-50 text-stone-600 border-stone-200 hover:bg-stone-100"}`,children:"是，记录时间"})]}),(0,t.jsx)("p",{className:"mt-1.5 text-xs text-stone-500",children:T?'使用时需要点击"开干"和"干完"来记录用时':'使用时只需点击"干"来记录完成'})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,t.jsxs)("button",{onClick:()=>{d(null),o(!1),M()},className:"flex-1 py-2.5 px-4 border border-stone-300 rounded-lg text-stone-600 hover:bg-stone-50 transition-colors flex items-center justify-center gap-1.5",children:[(0,t.jsx)(b,{className:"w-4 h-4"}),"取消"]}),(0,t.jsxs)("button",{onClick:i?()=>{i&&m.trim()&&(r(i,{name:m.trim(),difficulty:j,importance:w,timesPerDay:k,hasDuration:T}),d(null),M())}:()=>{m.trim()&&(n(m.trim(),j,w,k,T),M(),o(!1))},disabled:!m.trim(),className:"flex-1 py-2.5 px-4 bg-stone-800 text-white rounded-lg hover:bg-stone-700 disabled:bg-stone-300 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-1.5",children:[(0,t.jsx)(f,{className:"w-4 h-4"}),i?"保存":"添加"]})]})]}),e.length>0&&(0,t.jsx)("div",{className:"space-y-2",children:e.map(e=>(0,t.jsx)("div",{className:"bg-white rounded-xl border border-stone-200 p-4 shadow-sm",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"font-medium text-stone-800 truncate",children:e.name}),(0,t.jsxs)("div",{className:"mt-2 flex flex-wrap gap-2",children:[(0,t.jsxs)("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${g[e.difficulty].color}`,children:["难度: ",g[e.difficulty].label]}),(0,t.jsxs)("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${y[e.importance].color}`,children:["重要: ",y[e.importance].label]}),(0,t.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-stone-100 text-stone-600 border border-stone-200",children:[e.timesPerDay,"次/天"]}),e.hasDuration&&(0,t.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-orange-100 text-orange-700 border border-orange-200",children:"计时"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 ml-2",children:[(0,t.jsx)("button",{onClick:()=>{d(e.id),x(e.name),N(e.difficulty),v(e.importance),C(e.timesPerDay),I(e.hasDuration)},className:"p-2 text-stone-400 hover:text-stone-600 hover:bg-stone-100 rounded-lg transition-colors",children:(0,t.jsx)(p,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>a(e.id),className:"p-2 text-stone-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:(0,t.jsx)(h,{className:"w-4 h-4"})})]})]})},e.id))}),0===e.length&&!l&&(0,t.jsxs)("div",{className:"text-center py-8 text-stone-400",children:[(0,t.jsx)("p",{children:"还没有行动项"}),(0,t.jsx)("p",{className:"text-sm mt-1",children:"点击上方按钮添加你的第一个行动项"})]})]})}let N=o("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),w=o("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),v=o("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),k=o("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 6v6l4 2",key:"mmk7yg"}]]),C=o("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),T=o("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),I=o("flame",[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]]),M=o("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),D={low:"bg-green-500",medium:"bg-yellow-500",high:"bg-red-500"},S={low:"bg-gray-400",medium:"bg-blue-500",high:"bg-purple-500"};function $(e){let t=Math.floor(e/1e3),s=Math.floor(t/60),n=Math.floor(s/60);return n>0?`${n}小时${s%60}分钟`:s>0?`${s}分钟${t%60}秒`:`${t}秒`}function E({current:e,max:s,color:n}){let r=Math.min(100,e/s*100),a=Math.ceil(s);return(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(I,{className:"w-4 h-4 text-orange-500"}),(0,t.jsx)("div",{className:"flex-1 h-2.5 bg-stone-200 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:`h-full ${n} transition-all duration-500 ease-out rounded-full`,style:{width:`${r}%`}})}),(0,t.jsxs)("span",{className:"text-xs font-medium text-stone-600 min-w-[3rem] text-right",children:[e,"/",s]})]}),(0,t.jsx)("div",{className:"flex gap-1",children:Array.from({length:a}).map((s,r)=>(0,t.jsx)("div",{className:`w-2 h-2 rounded-full transition-colors duration-300 ${r<e?n:"bg-stone-200"}`},r))})]})}function A({task:e,actionItem:n,onStart:r,onCompleteWithDuration:a,onCompleteSimple:l,onCancel:o}){let i=e.currentExecution?.startTime!==null&&e.currentExecution?.endTime===null,[c,d]=(0,s.useState)(0);(0,s.useEffect)(()=>{if(!i||!e.currentExecution?.startTime)return void d(0);let t=setInterval(()=>{d(Date.now()-e.currentExecution.startTime)},1e3);return()=>clearInterval(t)},[i,e.currentExecution]);let m=(0,s.useMemo)(()=>"high"===n.importance?"bg-purple-500":"medium"===n.importance?"bg-blue-500":"bg-stone-500",[n.importance]);if(e.isCompletedToday){let s=e.executions.reduce((e,t)=>e+t.duration,0);return(0,t.jsx)("div",{className:"bg-stone-50 rounded-xl border border-stone-200 p-4 opacity-75",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center",children:(0,t.jsx)(v,{className:"w-5 h-5 text-green-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium text-stone-600 line-through",children:n.name}),(0,t.jsxs)("p",{className:"text-xs text-stone-400",children:["已完成 ",e.completedCount,"/",n.timesPerDay," 次",s>0&&` \xb7 总用时 ${$(s)}`]})]})]}),(0,t.jsx)("span",{className:"text-sm font-medium text-green-600",children:"✓"})]})})}return(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-stone-200 p-4 shadow-sm",children:[(0,t.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"font-semibold text-stone-800",children:n.name}),(0,t.jsxs)("div",{className:"mt-1 flex flex-wrap gap-1.5",children:[(0,t.jsx)("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-medium text-white ${D[n.difficulty]}`,children:"难度"}),(0,t.jsx)("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-medium text-white ${S[n.importance]}`,children:"重要"}),n.hasDuration&&(0,t.jsxs)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-medium bg-orange-100 text-orange-700",children:[(0,t.jsx)(k,{className:"w-3 h-3 mr-0.5"}),"计时"]})]})]})}),n.timesPerDay>1&&(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)(E,{current:e.completedCount,max:n.timesPerDay,color:m})}),i&&(0,t.jsx)("div",{className:"mb-4 p-3 bg-orange-50 rounded-lg border border-orange-100",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-orange-800",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-orange-500 rounded-full animate-pulse"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"进行中"}),(0,t.jsx)("span",{className:"text-lg font-mono font-semibold ml-auto",children:$(c)})]})}),(0,t.jsx)("div",{className:"flex gap-2",children:n.hasDuration?i?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>o(n.id),className:"flex-1 py-2.5 px-4 border border-stone-300 rounded-lg text-stone-600 hover:bg-stone-50 transition-colors text-sm font-medium",children:"取消"}),(0,t.jsxs)("button",{onClick:()=>a(n.id),className:"flex-[2] py-2.5 px-4 bg-stone-800 text-white rounded-lg hover:bg-stone-700 transition-colors flex items-center justify-center gap-2 font-medium",children:[(0,t.jsx)(w,{className:"w-4 h-4 fill-current"}),"干完"]})]}):(0,t.jsxs)("button",{onClick:()=>r(n.id),className:"w-full py-2.5 px-4 bg-stone-800 text-white rounded-lg hover:bg-stone-700 transition-colors flex items-center justify-center gap-2 font-medium",children:[(0,t.jsx)(N,{className:"w-4 h-4 fill-current"}),"开干"]}):(0,t.jsxs)("button",{onClick:()=>l(n.id),className:"w-full py-2.5 px-4 bg-stone-800 text-white rounded-lg hover:bg-stone-700 transition-colors flex items-center justify-center gap-2 font-medium",children:[(0,t.jsx)(v,{className:"w-4 h-4"}),"干"]})})]})}function P({sortedTasks:e,onStart:n,onCompleteWithDuration:r,onCompleteSimple:a,onCancel:l}){let o,i,c=(0,s.useMemo)(()=>new Date().toISOString().split("T")[0],[]),d=(0,s.useMemo)(()=>{let t=e.length,s=e.filter(({task:e})=>e.isCompletedToday).length,n=e.filter(({task:e})=>e.currentExecution?.startTime&&!e.currentExecution?.endTime).length,r=t>0?Math.round(s/t*100):0;return{total:t,completed:s,inProgress:n,completionRate:r}},[e]);return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(C,{className:"w-5 h-5 text-stone-600"}),(0,t.jsx)("h2",{className:"text-lg font-semibold text-stone-800",children:"今日任务"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-sm text-stone-500",children:[(0,t.jsx)(M,{className:"w-4 h-4"}),(o=new Date(c),i=new Date,o.toDateString()===i.toDateString()?"今天":`${o.getMonth()+1}月${o.getDate()}日`)]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-stone-200 p-3 text-center",children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-stone-800",children:d.completed}),(0,t.jsx)("p",{className:"text-xs text-stone-500 mt-0.5",children:"已完成"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-stone-200 p-3 text-center",children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-stone-800",children:d.inProgress}),(0,t.jsx)("p",{className:"text-xs text-stone-500 mt-0.5",children:"进行中"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-stone-200 p-3 text-center",children:[(0,t.jsxs)("p",{className:"text-2xl font-bold text-stone-800",children:[d.completionRate,"%"]}),(0,t.jsx)("p",{className:"text-xs text-stone-500 mt-0.5",children:"完成率"})]})]}),e.length>0?(0,t.jsx)("div",{className:"space-y-3",children:e.map(({task:e,actionItem:s})=>(0,t.jsx)(A,{task:e,actionItem:s,onStart:n,onCompleteWithDuration:r,onCompleteSimple:a,onCancel:l},e.actionId))}):(0,t.jsxs)("div",{className:"text-center py-12 bg-stone-50 rounded-xl border border-dashed border-stone-300",children:[(0,t.jsx)(T,{className:"w-12 h-12 text-stone-300 mx-auto mb-3"}),(0,t.jsx)("p",{className:"text-stone-500 font-medium",children:"还没有行动项"}),(0,t.jsx)("p",{className:"text-sm text-stone-400 mt-1",children:'先去"管理"界面添加吧'})]})]})}function U(){let[e,n]=(0,s.useState)("execute"),[r,a]=(0,s.useState)(!1),{actionItems:l,sortedTasks:o,isLoaded:u,addActionItem:h,updateActionItem:p,deleteActionItem:b,startTask:f,completeTaskWithDuration:g,completeTaskSimple:y,cancelTask:N}=function(){let{value:e,setValue:t,isLoaded:n}=function(e,t){let[n,r]=(0,s.useState)(t),[a,l]=(0,s.useState)(!1);(0,s.useEffect)(()=>{try{let t=window.localStorage.getItem(e);t&&r(JSON.parse(t))}catch(t){console.warn(`Error reading localStorage key "${e}":`,t)}l(!0)},[e]);let o=(0,s.useCallback)(t=>{try{let s=t instanceof Function?t(n):t;r(s),window.localStorage.setItem(e,JSON.stringify(s))}catch(t){console.warn(`Error setting localStorage key "${e}":`,t)}},[e,n]);return{value:n,setValue:o,removeValue:(0,s.useCallback)(()=>{try{r(t),window.localStorage.removeItem(e)}catch(t){console.warn(`Error removing localStorage key "${e}":`,t)}},[e,t]),isLoaded:a}}("checklist-app-v1",{actionItems:[],todayTasks:[],currentDate:m()}),[r,a]=(0,s.useState)(e);(0,s.useEffect)(()=>{if(!n)return;let s=m();if(e.currentDate!==s){let n={actionItems:e.actionItems,todayTasks:e.actionItems.map(e=>x(e.id)),currentDate:s};a(n),t(n)}else a(e)},[e,n,t]);let l=(0,s.useCallback)((e,s,n,r,l)=>{let o={id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:e.trim(),difficulty:s,importance:n,timesPerDay:Math.max(1,r),hasDuration:l,createdAt:Date.now()};a(e=>{let s={...e,actionItems:[...e.actionItems,o],todayTasks:[...e.todayTasks,x(o.id)]};return t(s),s})},[t]),o=(0,s.useCallback)((e,s)=>{a(n=>{let r=n.actionItems.map(t=>t.id===e?{...t,...s}:t),a=n.todayTasks.find(t=>t.actionId===e),l=n.todayTasks;a&&(void 0!==s.timesPerDay||void 0!==s.hasDuration)&&(l=n.todayTasks.map(t=>t.actionId===e?x(e):t));let o={...n,actionItems:r,todayTasks:l};return t(o),o})},[t]),i=(0,s.useCallback)(e=>{a(s=>{let n={...s,actionItems:s.actionItems.filter(t=>t.id!==e),todayTasks:s.todayTasks.filter(t=>t.actionId!==e)};return t(n),n})},[t]),c=(0,s.useCallback)(e=>{a(s=>{let n=s.todayTasks.map(t=>{if(t.actionId!==e)return t;let s={startTime:Date.now(),endTime:null,duration:0};return{...t,currentExecution:s,lastUpdated:Date.now()}}),r={...s,todayTasks:n};return t(r),r})},[t]),d=(0,s.useCallback)(e=>{a(s=>{let n=s.todayTasks.map(t=>{if(t.actionId!==e||!t.currentExecution?.startTime)return t;let n=Date.now(),r=n-t.currentExecution.startTime,a={...t.currentExecution,endTime:n,duration:r},l=s.actionItems.find(t=>t.id===e),o=l?.timesPerDay||1,i=t.completedCount+1;return{...t,completedCount:i,currentExecution:null,executions:[...t.executions,a],isCompletedToday:i>=o,lastUpdated:Date.now()}}),r={...s,todayTasks:n};return t(r),r})},[t]),u=(0,s.useCallback)(e=>{a(s=>{let n=s.todayTasks.map(t=>{if(t.actionId!==e)return t;let n=s.actionItems.find(t=>t.id===e),r=n?.timesPerDay||1,a=t.completedCount+1;return{...t,completedCount:a,isCompletedToday:a>=r,lastUpdated:Date.now()}}),r={...s,todayTasks:n};return t(r),r})},[t]),h=(0,s.useCallback)(e=>{a(s=>{let n=s.todayTasks.map(t=>t.actionId!==e?t:{...t,currentExecution:null,lastUpdated:Date.now()}),r={...s,todayTasks:n};return t(r),r})},[t]),p=(0,s.useMemo)(()=>{let e={high:3,medium:2,low:1};return[...r.todayTasks].sort((t,s)=>{let n=r.actionItems.find(e=>e.id===t.actionId),a=r.actionItems.find(e=>e.id===s.actionId);if(!n||!a)return 0;if(t.isCompletedToday!==s.isCompletedToday)return t.isCompletedToday?1:-1;let l=e[a.importance]-e[n.importance];return 0!==l?l:n.createdAt-a.createdAt}).map(e=>({task:e,actionItem:r.actionItems.find(t=>t.id===e.actionId)})).filter(({actionItem:e})=>void 0!==e)},[r.todayTasks,r.actionItems]);return{actionItems:r.actionItems,todayTasks:r.todayTasks,sortedTasks:p,isLoaded:n,addActionItem:l,updateActionItem:o,deleteActionItem:i,startTask:c,completeTaskWithDuration:d,completeTaskSimple:u,cancelTask:h}}();return((0,s.useEffect)(()=>{a(!0)},[]),r&&u)?(0,t.jsxs)("div",{className:"min-h-screen bg-stone-50",children:[(0,t.jsx)("header",{className:"sticky top-0 z-10 bg-white/80 backdrop-blur-md border-b border-stone-200",children:(0,t.jsx)("div",{className:"max-w-md mx-auto px-4 py-3 flex items-center justify-between",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-stone-800 rounded-lg flex items-center justify-center",children:(0,t.jsx)(d,{className:"w-4 h-4 text-white"})}),(0,t.jsx)("h1",{className:"font-bold text-stone-800",children:"J人养成器"})]})})}),(0,t.jsx)("main",{className:"max-w-md mx-auto px-4 py-4 pb-24",children:"execute"===e?(0,t.jsx)(P,{sortedTasks:o,onStart:f,onCompleteWithDuration:g,onCompleteSimple:y,onCancel:N}):(0,t.jsx)(j,{actionItems:l,onAdd:h,onUpdate:p,onDelete:b})}),(0,t.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-stone-200 safe-area-pb",children:(0,t.jsx)("div",{className:"max-w-md mx-auto px-4",children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsxs)("button",{onClick:()=>n("execute"),className:`flex-1 flex flex-col items-center py-3 transition-colors ${"execute"===e?"text-stone-800":"text-stone-400 hover:text-stone-600"}`,children:[(0,t.jsx)(i,{className:"w-6 h-6 mb-0.5"}),(0,t.jsx)("span",{className:"text-xs font-medium",children:"执行任务"})]}),(0,t.jsxs)("button",{onClick:()=>n("manage"),className:`flex-1 flex flex-col items-center py-3 transition-colors ${"manage"===e?"text-stone-800":"text-stone-400 hover:text-stone-600"}`,children:[(0,t.jsx)(c,{className:"w-6 h-6 mb-0.5"}),(0,t.jsx)("span",{className:"text-xs font-medium",children:"管理"})]})]})})})]}):(0,t.jsx)("div",{className:"min-h-screen bg-stone-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 border-3 border-stone-300 border-t-stone-800 rounded-full animate-spin"}),(0,t.jsx)("p",{className:"text-sm text-stone-500",children:"加载中..."})]})})}e.s(["App",()=>U],9843)}]);